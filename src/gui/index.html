<!DOCTYPE html>
<html>
<head>
	<title>Chess Board GUI</title>
    <style>
        body {
            margin:0;
            background-color: #46423e;
        }

        .page-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100vw;
            height: 100vh;
        }

        .board-container {
            width: 800px;
            height: 800px;
            position: relative;
        }

        .board {
            width: 100%;
            display: flex;
            flex-wrap: wrap;
        }

        .row {
            width: 100%;
            height: 100%;
            display: flex;
            flex-wrap: wrap;
        }

        .square {
            width: 100px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 86px;
        }

        .white {
            background-color: #f0d9b5;
        }

        .black {
            background-color: #b58863;
        }
    </style>
</head>
<body>
    <div class="page-container">
        <div class="board-container">
            <div class="board">
                <div class="row" id="row8">
                    <div class="square white" id="a8"></div>
                    <div class="square black" id="b8"></div>
                    <div class="square white" id="c8"></div>
                    <div class="square black" id="d8"></div>
                    <div class="square white" id="e8"></div>
                    <div class="square black" id="f8"></div>
                    <div class="square white" id="g8"></div>
                    <div class="square black" id="h8"></div>
                </div>
                <div class="row" id="row7">
                    <div class="square black" id="a7"></div>
                    <div class="square white" id="b7"></div>
                    <div class="square black" id="c7"></div>
                    <div class="square white" id="d7"></div>
                    <div class="square black" id="e7"></div>
                    <div class="square white" id="f7"></div>
                    <div class="square black" id="g7"></div>
                    <div class="square white" id="h7"></div>
                </div>
                <div class="row" id="row6">
                    <div class="square white" id="a6"></div>
                    <div class="square black" id="b6"></div>
                    <div class="square white" id="c6"></div>
                    <div class="square black" id="d6"></div>
                    <div class="square white" id="e6"></div>
                    <div class="square black" id="f6"></div>
                    <div class="square white" id="g6"></div>
                    <div class="square black" id="h6"></div>
                </div>
                <div class="row" id="row5">
                    <div class="square black" id="a5"></div>
                    <div class="square white" id="b5"></div>
                    <div class="square black" id="c5"></div>
                    <div class="square white" id="d5"></div>
                    <div class="square black" id="e5"></div>
                    <div class="square white" id="f5"></div>
                    <div class="square black" id="g5"></div>
                    <div class="square white" id="h5"></div>
                </div>
                <div class="row" id="row4">
                    <div class="square white" id="a4"></div>
                    <div class="square black" id="b4"></div>
                    <div class="square white" id="c4"></div>
                    <div class="square black" id="d4"></div>
                    <div class="square white" id="e4"></div>
                    <div class="square black" id="f4"></div>
                    <div class="square white" id="g4"></div>
                    <div class="square black" id="h4"></div>
                </div>
                <div class="row" id="row3">
                    <div class="square black" id="a3"></div>
                    <div class="square white" id="b3"></div>
                    <div class="square black" id="c3"></div>
                    <div class="square white" id="d3"></div>
                    <div class="square black" id="e3"></div>
                    <div class="square white" id="f3"></div>
                    <div class="square black" id="g3"></div>
                    <div class="square white" id="h3"></div>
                </div>
                <div class="row" id="row2">
                    <div class="square white" id="a2"></div>
                    <div class="square black" id="b2"></div>
                    <div class="square white" id="c2"></div>
                    <div class="square black" id="d2"></div>
                    <div class="square white" id="e2"></div>
                    <div class="square black" id="f2"></div>
                    <div class="square white" id="g2"></div>
                    <div class="square black" id="h2"></div>
                </div>
                <div class="row" id="row1">
                    <div class="square black" id="a1"></div>
                    <div class="square white" id="b1"></div>
                    <div class="square black" id="c1"></div>
                    <div class="square white" id="d1"></div>
                    <div class="square black" id="e1"></div>
                    <div class="square white" id="f1"></div>
                    <div class="square black" id="g1"></div>
                    <div class="square white" id="h1"></div>
                </div>
            </div>
        </div>
    </div>

	<script type="text/javascript">
        function numToAddress(num) {
            let row = Math.trunc(num / 8)
            let col = num % 8

            return String.fromCharCode('a'.charCodeAt() + col) + (row+1)
        }

        function myFunction(paramOne, paramTwo) {
            console.log(paramOne);
            console.log(paramTwo);
        }

        const KING   = 5
        const QUEEN  = 4
        const ROOK   = 3
        const BISHOP = 2
        const KNIGHT = 1
        const PAWN   = 0

        const BLACK = 1
        const WHITE = 0

        const WHITE_KING_ICON   = '\u2654'
        const WHITE_QUEEN_ICON  = '\u2655'
        const WHITE_ROOK_ICON   = '\u2656'
        const WHITE_BISHOP_ICON = '\u2657'
        const WHITE_KNIGHT_ICON = '\u2658'
        const WHITE_PAWN_ICON   = '\u2659'
        const BLACK_KING_ICON   = '\u265A'
        const BLACK_QUEEN_ICON  = '\u265B'
        const BLACK_ROOK_ICON   = '\u265C'
        const BLACK_BISHOP_ICON = '\u265D'
        const BLACK_KNIGHT_ICON = '\u265E'
        const BLACK_PAWN_ICON   = '\u265F'

        function getIcon(piece, color) {
            if (piece == KING && color == WHITE) {
                return WHITE_KING_ICON
            } else if (piece == QUEEN && color == WHITE) {
                return WHITE_QUEEN_ICON
            } else if (piece == ROOK && color == WHITE) {
                return WHITE_ROOK_ICON
            } else if (piece == BISHOP && color == WHITE) {
                return WHITE_BISHOP_ICON
            } else if (piece == KNIGHT && color == WHITE) {
                return WHITE_KNIGHT_ICON
            } else if (piece == PAWN && color == WHITE) {
                return WHITE_PAWN_ICON
            } else if (piece == KING && color == BLACK) {
                return BLACK_KING_ICON
            } else if (piece == QUEEN && color == BLACK) {
                return BLACK_QUEEN_ICON
            } else if (piece == ROOK && color == BLACK) {
                return BLACK_ROOK_ICON
            } else if (piece == BISHOP && color == BLACK) {
                return BLACK_BISHOP_ICON
            } else if (piece == KNIGHT && color == BLACK) {
                return BLACK_KNIGHT_ICON
            } else if (piece == PAWN && color == BLACK) {
                return BLACK_PAWN_ICON
            }
        }

        startLayout = {
            "a1": WHITE_ROOK_ICON,
            "b1": WHITE_KNIGHT_ICON,
            "c1": WHITE_BISHOP_ICON,
            "d1": WHITE_QUEEN_ICON,
            "e1": WHITE_KING_ICON,
            "f1": WHITE_BISHOP_ICON,
            "g1": WHITE_KNIGHT_ICON,
            "h1": WHITE_ROOK_ICON,
            "a2": WHITE_PAWN_ICON,
            "b2": WHITE_PAWN_ICON,
            "c2": WHITE_PAWN_ICON,
            "d2": WHITE_PAWN_ICON,
            "e2": WHITE_PAWN_ICON,
            "f2": WHITE_PAWN_ICON,
            "g2": WHITE_PAWN_ICON,
            "h2": WHITE_PAWN_ICON,
            "a7": BLACK_PAWN_ICON,
            "b7": BLACK_PAWN_ICON,
            "c7": BLACK_PAWN_ICON,
            "d7": BLACK_PAWN_ICON,
            "e7": BLACK_PAWN_ICON,
            "f7": BLACK_PAWN_ICON,
            "g7": BLACK_PAWN_ICON,
            "h7": BLACK_PAWN_ICON,
            "a8": BLACK_ROOK_ICON,
            "b8": BLACK_KNIGHT_ICON,
            "c8": BLACK_BISHOP_ICON,
            "d8": BLACK_QUEEN_ICON,
            "e8": BLACK_KING_ICON,
            "f8": BLACK_BISHOP_ICON,
            "g8": BLACK_KNIGHT_ICON,
            "h8": BLACK_ROOK_ICON,
        }

        for (var address in startLayout){
            var piece = startLayout[address]
            var cell = document.querySelector('#' + address)
            cell.textContent = piece
        }

        // Executes our "invoke_handler" - passing the value "test_one" as the second parameter.
        external.invoke('syncRequest');

        function sync(board) {
            for (var i = 0; i<64; i++){
                var cell = document.querySelector('#' + numToAddress(i))
                cell.textContent = ""
            }

            for (var i in board) {
                var piece = board[i]

                var cell = document.querySelector('#' + numToAddress(piece.address))
                cell.textContent = getIcon(piece.piece_type, piece.color)
            }
        }
    </script>
</body>
</html>